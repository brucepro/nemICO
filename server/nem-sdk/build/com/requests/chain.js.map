{"version":3,"sources":["../../../src/com/requests/chain.js"],"names":["height","endpoint","Promise","resolve","reject","options","url","formatEndpoint","method","error","response","body","statusCode","JSON","parse","lastBlock","time","module","exports"],"mappings":";;AAAA;;;;AACA;;;;;;AAEA;;;;;;;AAOA,IAAIA,SAAS,SAATA,MAAS,CAAUC,QAAV,EAAoB;AAChC,QAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC;AACA,MAAIC,UAAU;AACVC,QAAK,kBAAQC,cAAR,CAAuBN,QAAvB,IAAmC,eAD9B;AAEVO,WAAQ;;AAGZ;AALc,GAAd,CAMA,uBAAQH,OAAR,EAAiB,UAAUI,KAAV,EAAiBC,QAAjB,EAA2BC,IAA3B,EAAiC;AAC9C,OAAI,CAACF,KAAD,IAAUC,SAASE,UAAT,IAAuB,GAArC,EAA0C;AACtCT,YAAQU,KAAKC,KAAL,CAAWH,IAAX,CAAR;AACH,IAFD,MAEO;AACNP,WAAOK,KAAP;AACA;AACJ,GAND;AAOA,EAfM,CAAP;AAgBA,CAjBD;;AAmBA;;;;;;;AAOA,IAAIM,YAAY,SAAZA,SAAY,CAASd,QAAT,EAAkB;AACjC,QAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC;AACA,MAAIC,UAAU;AACVC,QAAK,kBAAQC,cAAR,CAAuBN,QAAvB,IAAmC,mBAD9B;AAEVO,WAAQ;;AAGZ;AALc,GAAd,CAMA,uBAAQH,OAAR,EAAiB,UAAUI,KAAV,EAAiBC,QAAjB,EAA2BC,IAA3B,EAAiC;AAC9C,OAAI,CAACF,KAAD,IAAUC,SAASE,UAAT,IAAuB,GAArC,EAA0C;AACtCT,YAAQU,KAAKC,KAAL,CAAWH,IAAX,CAAR;AACH,IAFD,MAEO;AACNP,WAAOK,KAAP;AACA;AACJ,GAND;AAOA,EAfM,CAAP;AAgBA,CAjBD;;AAmBA;;;;;;;AAOA,IAAIO,OAAO,SAAPA,IAAO,CAAUf,QAAV,EAAoB;AAC9B,QAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC;AACA,MAAIC,UAAU;AACVC,QAAK,kBAAQC,cAAR,CAAuBN,QAAvB,IAAmC,yBAD9B;AAEVO,WAAQ;;AAGZ;AALc,GAAd,CAMA,uBAAQH,OAAR,EAAiB,UAAUI,KAAV,EAAiBC,QAAjB,EAA2BC,IAA3B,EAAiC;AAC9C,OAAI,CAACF,KAAD,IAAUC,SAASE,UAAT,IAAuB,GAArC,EAA0C;AACtCT,YAAQU,KAAKC,KAAL,CAAWH,IAAX,CAAR;AACH,IAFD,MAEO;AACNP,WAAOK,KAAP;AACA;AACJ,GAND;AAOA,EAfM,CAAP;AAgBA,CAjBD;;AAmBAQ,OAAOC,OAAP,GAAiB;AAChBlB,eADgB;AAEhBe,qBAFgB;AAGhBC;AAHgB,CAAjB","file":"chain.js","sourcesContent":["import Request from 'request';\nimport Helpers from '../../utils/helpers';\n\n/**\n * Gets the current height of the block chain.\n *\n * @param {object} endpoint - An NIS endpoint object\n *\n * @return {object} - A [BlockHeight]{@link http://bob.nem.ninja/docs/#block-chain-height} object\n */\nlet height = function (endpoint) {\n\treturn new Promise((resolve, reject) => {\n\t\t// Configure the request\n\t\tvar options = {\n\t\t    url: Helpers.formatEndpoint(endpoint) + '/chain/height',\n\t\t    method: 'GET'\n\t\t}\n\n\t\t// Start the request\n\t\tRequest(options, function (error, response, body) {\n\t\t    if (!error && response.statusCode == 200) {\n\t\t        resolve(JSON.parse(body));\n\t\t    } else {\n\t\t    \treject(error);\n\t\t    }\n\t\t});\n\t});\n}\n\n/**\n * Gets the current last block of the chain.\n *\n * @param {object} endpoint - An NIS endpoint object\n *\n * @return {object} -\n */\nlet lastBlock = function(endpoint){\n\treturn new Promise((resolve, reject) => {\n\t\t// Configure the request\n\t\tvar options = {\n\t\t    url: Helpers.formatEndpoint(endpoint) + '/chain/last-block',\n\t\t    method: 'GET'\n\t\t}\n\n\t\t// Start the request\n\t\tRequest(options, function (error, response, body) {\n\t\t    if (!error && response.statusCode == 200) {\n\t\t        resolve(JSON.parse(body));\n\t\t    } else {\n\t\t    \treject(error);\n\t\t    }\n\t\t});\n\t});\n}\n\n/**\n * Gets network time (in ms)\n *\n * @param {object} endpoint - An NIS endpoint object\n *\n * @return {object} - A [communicationTimeStamps]{@link http://bob.nem.ninja/docs/#communicationTimeStamps} object\n */\nlet time = function (endpoint) {\n\treturn new Promise((resolve, reject) => {\n\t\t// Configure the request\n\t\tvar options = {\n\t\t    url: Helpers.formatEndpoint(endpoint) + '/time-sync/network-time',\n\t\t    method: 'GET'\n\t\t}\n\n\t\t// Start the request\n\t\tRequest(options, function (error, response, body) {\n\t\t    if (!error && response.statusCode == 200) {\n\t\t        resolve(JSON.parse(body));\n\t\t    } else {\n\t\t    \treject(error);\n\t\t    }\n\t\t});\n\t});\n}\n\nmodule.exports = {\n\theight,\n\tlastBlock,\n\ttime\n}"]}